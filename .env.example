# Binance Configuration
# Comma-separated list of symbols to monitor (e.g., BTCUSDT,ETHUSDT,XAUUSD)
# Note: XAUUSD will be automatically mapped to XAUUSDT if it exists
SYMBOLS=BTCUSDT,ETHUSDT

# Timeframes to monitor (comma-separated: 1d,4h,1h)
# V2: Entry timeframes: 1h + 4h. HTF bias: 1h + 4h (ENTRY-only mode)
# 1h/4h = Entry timeframes and HTF bias
TIMEFRAMES=1h,4h

# Binance API Base URL (optional, defaults to https://fapi.binance.com)
BINANCE_API_BASE=https://fapi.binance.com

# Telegram Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Optional: Telegram Group ID for group notifications (e.g., -1001234567890)
TELEGRAM_GROUP_ID=

# Send startup notification message (default: false)
TELEGRAM_SEND_STARTUP=false

# Send connection test message on startup (default: false)
TELEGRAM_SEND_CONNECTION_TEST=false

# Telegram timezone for timestamp display (default: Asia/Ho_Chi_Minh)
# Examples: Asia/Bangkok, Asia/Singapore, UTC
TELEGRAM_TIMEZONE=Asia/Ho_Chi_Minh

# Signal Configuration - V2 Enhanced
# Cooldown period in minutes to avoid duplicate signals (V2 default: 90)
SIGNAL_COOLDOWN_MINUTES=90

# Minimum score threshold (0-100) for sending signals
MIN_SIGNAL_SCORE=70

# Two-Stage Alerts Configuration
# Entry timeframes (comma-separated, V2 default: 1h,4h)
ENTRY_TIMEFRAMES=1h,4h
# HTF timeframes for bias (comma-separated, V2 default: 1h,4h)
HTF_TIMEFRAMES=1h,4h
# Signal stages to enable (comma-separated: setup,entry). V2: ENTRY-only by default
SIGNAL_STAGE_ENABLED=entry
# Score threshold for SETUP alerts (early warning)
SETUP_SCORE_THRESHOLD=50
# Score threshold for ENTRY alerts (confirmed signals)
ENTRY_SCORE_THRESHOLD=70

# Risk & Quality Filters
# Minimum risk-reward ratio for ENTRY signals
MIN_RR=1.5

# Anti-Chase Configuration
# Maximum ATR multiple for chase detection
ANTI_CHASE_MAX_ATR=2.0
# Maximum percentage move for chase detection
ANTI_CHASE_MAX_PCT=3.0

# Scoring Configuration
# Bonus points for RSI divergence (default: 10)
RSI_DIVERGENCE_BONUS=10
# Volume is used for SCORING bonus, not as a required condition (default: false for 100% Price Action)
# Set to true if you want volume to be part of the analysis, but it will NOT block signals
REQUIRE_VOLUME_CONFIRMATION=false

# Pattern Detection Configuration (100% Price Action)
# Enable/disable specific candlestick patterns (default: all enabled)
PATTERN_PINBAR_ENABLED=true
PATTERN_ENGULFING_ENABLED=true
PATTERN_HARAMI_ENABLED=true
PATTERN_INSIDE_BAR_ENABLED=true
PATTERN_MORNING_STAR_ENABLED=true
PATTERN_EVENING_STAR_ENABLED=true
PATTERN_TWEEZER_ENABLED=true
PATTERN_DOJI_ENABLED=true
PATTERN_THREE_WHITE_SOLDIERS_ENABLED=true
PATTERN_THREE_BLACK_CROWS_ENABLED=true

# Pattern Scoring Weights (base points for each pattern type)
PATTERN_PINBAR_WEIGHT=8
PATTERN_ENGULFING_WEIGHT=10
PATTERN_HARAMI_WEIGHT=9
PATTERN_INSIDE_BAR_WEIGHT=7
PATTERN_MORNING_STAR_WEIGHT=12
PATTERN_EVENING_STAR_WEIGHT=12
PATTERN_TWEEZER_WEIGHT=9
PATTERN_DOJI_WEIGHT=5
PATTERN_THREE_WHITE_SOLDIERS_WEIGHT=13
PATTERN_THREE_BLACK_CROWS_WEIGHT=13

# V2 PA Configuration - Advanced
# Volume spike threshold (multiplier of average volume, default: 1.5)
# Note: Volume is used for SCORING only, not as a blocker (100% Price Action)
VOLUME_SPIKE_THRESHOLD=1.5

# Breakout/Retest Parameters (100% Price Action)
# Percentage tolerance for price to be considered "touching" a zone
BREAKOUT_TOLERANCE_PCT=0.3
# Number of candles to confirm a true breakout
BREAKOUT_CONFIRMATION_CANDLES=2
# Percentage price must move beyond level to confirm breakout
BREAKOUT_MOVE_PCT=0.5

# Liquidity Sweep/Trap Parameters
# Percentage below/above pivot to consider a sweep (default: 0.3%)
SWEEP_PCT=0.3
# Percentage to reclaim after sweep (default: 0.2%)
RECLAIM_PCT=0.2
# Minimum wick rejection ratio for sweep/trap (0-1, default: 0.5 = 50%)
WICK_REJECTION_MIN=0.5

# Breakout-Retest Parameters
# Maximum bars to wait for retest after breakout (default: 4)
RETEST_MAX_BARS=4
# Window to check for confirmation candle after retest (default: 2)
CONFIRMATION_WINDOW=2

# ATR Spike Detection
# ATR spike ratio threshold for volatility detection (default: 1.5)
ATR_SPIKE_RATIO=1.5

# Cooldown Bypass
# Allow cooldown bypass on CHOCH detection (default: true)
COOLDOWN_BYPASS_ON_CHOCH=true

# Source text for signal footer (Vietnamese format)
# V2 Default: "Nguồn Posiya Tú zalo 0763888872"
SIGNAL_SOURCE_TEXT=Nguồn Posiya Tú zalo 0763888872


# Price Action Configuration
# Window size for pivot detection (how many candles to look back)
PIVOT_WINDOW=5

# Number of candles to look back for zone building
ZONE_LOOKBACK=100

# Zone tolerance percentage (how close price needs to be to consider it a touch)
ZONE_TOLERANCE_PCT=0.5

# Zone-based SL/TP Configuration
# Buffer for stop loss beyond zones (percentage)
ZONE_SL_BUFFER_PCT=0.2

# Minimum number of zones required for signal generation
MIN_ZONES_REQUIRED=2

# Database Configuration
DB_PATH=./data/signals.db

# Application Settings
# Set to 'true' to disable Telegram sending and only log to console
DRY_RUN=false

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Intrabar update throttle in milliseconds (default: 10000 = 10 seconds)
INTRABAR_THROTTLE_MS=10000

# Diagnostics and Debugging
# Print detailed symbol validation table on startup (default: false)
VERBOSE_SYMBOL_VALIDATION=false

# Print concise rejection reason summary for each candle close (default: false)
DIAGNOSTIC_MODE=false

# Footer Configuration
SOURCE_NAME=PA-Bot
TAGLINE=Price Action + Volume Analysis
